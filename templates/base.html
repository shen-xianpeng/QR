<html>
    <head>
        <script src="{{ STATIC_URL }}js/jquery-1.10.2.min.js"></script>
        <script src="{{ STATIC_URL }}js/angular.js"></script>
        <script src="{{ STATIC_URL }}js/ui-bootstrap-custom-0.7.0.js"></script>
        <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/base.css">

        <title>{% block title %}{% endblock title %}</title>

    </head>
    <body>
        <div class='head'>
            <div class="navbar">
                <ul>
                    <li><a href='{% url 'index' %}'>首页</a></li>
                    <li><a  href="javascript:void(0)" class='askquestion'>ask</a></li>
                {% if  user.is_authenticated %}
                <li><a {% if is_me %}class='is-my-space'{% endif %} href='{% url 'users-user' user.id %}'>{{ user.username }}</a></li>
                    <li><a href='{% url 'users-logout' %}'>退出 </a></li>
                {% else %}
                    <li><a href='{% url 'users-login' %}'>登录 </a></li>
                    <li><a href='{% url 'users-signup' %}'>注册</a></li>
                {% endif %}
                </ul>
            </div>
        </div>

        <div class='container'>
            <div class='content'>
        {% block content %}

        {% endblock %}
            </div>
        </div>
    </body>

</html>
<style>

	#mask {
		position:fixed;
		top:0;
		left:0;
		width:100%;
		height:100%;
		background:#000;
		opacity:0.5;
		filter:alpha(opacity=50);
	}

	#modal {
		padding: 0;
		overflow: hidden;
		background: white;
		box-shadow: 0px 0px 6px 1px #ECFECF;
		position:absolute;
	}
	#modal .question-input {
		width: 300px;
		border:0;
		padding:10px;
		font-size:1.3em;
		font-family:"Ubuntu Light","Ubuntu","Ubuntu Mono","Segoe Print","Segoe UI";
		color:#ccc;
		border:solid 1px #ccc;
		margin:0 0 20px;
		width:300px;
		-moz-box-shadow: inset 0 0 4px rgba(0,0,0,0.2);
		//-webkit-box-shadow: inset 0 0 4px rgba(0, 0, 0, 0.2);
		box-shadow: inner 0 0 4px rgba(0, 0, 0, 0.2);
		-webkit-border-radius: 3px;
		-moz-border-radius: 3px;
		border-radius: 3px
	}
	#modal textarea {
		border-color: gray;
		margin: 0;
	}

	#modal-content {
		background:#fff;
		padding:20px;
	}

	#close {
		color: gray;
		cursor: default;
		position: absolute;
		top: 2px;
		right: 30px;
		display: block;
	}
	#close:hover {
		background: ECF1EF;
	}
</style>
<script>
var modal = (function(){
	var
	method = {},
	$overlay,
	$modal,
	$content,
	$close;

	// Center the modal in the viewport
	method.center = function () {
		var top, left;

		top = Math.max($(window).height() - $modal.outerHeight(), 0) / 2;
		left = Math.max($(window).width() - $modal.outerWidth(), 0) / 2;

		$modal.css({
			top:top + $(window).scrollTop(),
			left:left + $(window).scrollLeft()
		});
	};

	// Open the modal
	method.open = function (settings) {
		$content.empty().append(settings.content);

		$modal.css({
			width: settings.width || 'auto',
			height: settings.height || 'auto'
		});

		method.center();
		$(window).bind('resize.modal', method.center);
		$modal.show();
		$overlay.show();
	};

	// Close the modal
	method.close = function () {
		$modal.hide();
		$overlay.hide();
		$content.empty();
		$(window).unbind('resize.modal');
	};

	// Generate the HTML and add it to the document
	$overlay = $('<div id="mask"></div>');
	$modal = $('<div id="modal"></div>');
	$content = $('<div id="modal-content"></div>');
	$close = $('<div id="close" href="#">close</div>');

	$modal.hide();
	$overlay.hide();
	$modal.append($close, $content);

	$(document).ready(function(){
		$('body').append($overlay, $modal);
	});

	$close.click(function(e){
		e.preventDefault();
		method.close();
	});

	$overlay.click(function(e){
		e.preventDefault();
		method.close();
	});
	return method;
	}());


	// Wait until the DOM has loaded before querying the document
	$(document).ready(function(){


$('.askquestion').click(function() {
    $.ajax({
	type : "get",
	url : '/question/new/',
	dataType : "html",
	success: function(data) {
	    //alert( $(data).find('#test').html() ); // returns null
			modal.open({content: data});
        },
	error : function() {
	    alert("Sorry, The requested property could not be found.");
	}
    });

});
});
</script>
